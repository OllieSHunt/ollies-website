<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <meta
          name="description"
          content="Creating a makeshift static site generator using server side includes (SSI) and Python&#x27;s `str.replace` method. I also talk about how to use SSI, why it is useful, and why Zola is great." />

        <title>Accidentally Reinventing The Static Site Generator | Ollie&#x27;s Website</title>

        <!-- Atom feed discovery -->
        <link rel="alternate" type="application/atom+xml" title="Atom" href="/blog/atom.xml" />

        <!-- Favicon svg and fallback ico -->
        <link rel="icon" href="/favicon.ico" sizes="any">
        <link rel="icon" href="/favicon.svg" type="image/svg+xml">

        <!-- Stylesheets -->
        <link rel="stylesheet" type="text/css" href="/css/css-reset.css" />
        <link rel="stylesheet" type="text/css" href="/css/misc-variables.css" />

        <link rel="stylesheet" type="text/css" href="/css/theme-dark.css" />
        <link rel="stylesheet" type="text/css" href="/css/syntax-theme-dark.css" />

        <link rel="stylesheet" type="text/css" href="/css/main-style.css" />
        <link rel="stylesheet" type="text/css" href="/css/zola-specific.css" />
        <link rel="stylesheet" type="text/css" href="/css/header-bar.css" />

        
<link rel="stylesheet" type="text/css" href="/css/blog-article.css" />


        <!-- JavaScript -->
        <script defer src="/js/header-bar.js"></script>

        

        
    </head>

    <body>
        <div id="header-bar-anchor" aria-hidden="true">
            <!-- This acts as a reference point so the nav bar knows when it has scrolled away from the top of the page. -->
        </div>

        <header id="header-bar">
            <!-- Nav bar displayed at the top of the screen -->

            <nav>
                <ol>
                    <li><a class="link-button" href="/">
                        <!-- Icon credit: https://icon-sets.iconify.design/tabler/home-filled/ -->
                        <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="m12.707 2.293l9 9c.63.63.184 1.707-.707 1.707h-1v6a3 3 0 0 1-3 3h-1v-7a3 3 0 0 0-2.824-2.995L13 12h-2a3 3 0 0 0-3 3v7H7a3 3 0 0 1-3-3v-6H3c-.89 0-1.337-1.077-.707-1.707l9-9a1 1 0 0 1 1.414 0M13 14a1 1 0 0 1 1 1v7h-4v-7a1 1 0 0 1 .883-.993L11 14z"/></svg>
                        <span>Home</span>
                    </a></li>
                    <li><a class="link-button" href="/blog">
                        <!-- Icon credit: https://icon-sets.iconify.design/tabler/bubble-text-filled/ -->
                        <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="m12.4 2l.253.005a6.34 6.34 0 0 1 5.235 3.166l.089.163l.178.039a6.33 6.33 0 0 1 4.254 3.406l.105.228a6.334 6.334 0 0 1-5.74 8.865l-.144-.002l-.037.052a5.26 5.26 0 0 1-5.458 1.926l-.186-.051l-3.435 2.06a1 1 0 0 1-1.508-.743L6 21v-2.435l-.055-.026a3.67 3.67 0 0 1-1.554-1.498l-.102-.199a3.67 3.67 0 0 1-.312-2.14l.038-.21l-.116-.092a5.8 5.8 0 0 1-1.887-6.025l.071-.238a5.8 5.8 0 0 1 5.42-4.004h.157l.15-.165a6.33 6.33 0 0 1 4.33-1.963zM14 13H9a1 1 0 0 0 0 2h5a1 1 0 0 0 0-2m3-4H7a1 1 0 1 0 0 2h10a1 1 0 0 0 0-2"/></svg>
                        <span>Blog</span>
                    </a></li>
                    <li><a class="link-button" href="/projects">
                        <!-- Icon credit: https://icon-sets.iconify.design/tabler/file-code-filled/ -->
                        <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g fill="currentColor"><path d="m12 2l.117.007a1 1 0 0 1 .876.876L13 3v4l.005.15a2 2 0 0 0 1.838 1.844L15 9h4l.117.007a1 1 0 0 1 .876.876L20 10v9a3 3 0 0 1-2.824 2.995L17 22H7a3 3 0 0 1-2.995-2.824L4 19V5a3 3 0 0 1 2.824-2.995L7 2zm-1.553 11.106a1 1 0 0 0-1.341.447l-1 2a1 1 0 0 0 0 .894l1 2a1 1 0 0 0 1.341.447l.102-.058a1 1 0 0 0 .345-1.283L10.118 16l.776-1.553a1 1 0 0 0-.447-1.341m4.447.447a1 1 0 0 0-1.341-.447l-.102.058a1 1 0 0 0-.345 1.283L13.88 16l-.775 1.553a1 1 0 0 0 1.788.894l1-2a1 1 0 0 0 0-.894z"/><path d="M19 7h-4l-.001-4.001z"/></g></svg>
                        <span>Projects</span>
                    </a></li>
                    <li><a class="link-button" href="/search">
                        <!-- Icon credit: https://icon-sets.iconify.design/tabler/search/ -->
                        <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10a7 7 0 1 0 14 0a7 7 0 1 0-14 0m18 11l-6-6"/></svg>
                        <span>Search</span>
                    </a></li>
                </ol>
            </nav>
        </header>

        <main>
<article>
    <h1 id="accidentally-reinventing-the-static-site-generator"><a href="#accidentally-reinventing-the-static-site-generator" class="heading-anchor">Accidentally Reinventing The Static Site Generator</a></h1>
<h2 id="setting-the-scene"><a href="#setting-the-scene" class="heading-anchor">Setting the Scene</a></h2>
<p>So a while ago, I decided to build my own website/blog (your reading it right now!).</p>
<p>The first thing I did after the usual HTML boilerplate was to start work on a navigation bar. The nav bar is, in my opinion, the "core" of any website. It's on every single page and users will keep coming back to it again and again to move around your page.</p>
<p>After a few notebook sketches and indecision, I eventually settled on the following design:</p>
<p><img src="https://olliehunt.dev/blog/reinventing-the-ssg/nav-bar.webp" alt="Initial navigation bar prototype" /></p>
<p>When you scrolled, it visually changed its style and followed you down the page. Overall, I was quite happy with this design.</p>
<p>But I now had an issue to deal with: when I create new pages, how do I get this navigation bar onto all those new pages? The obvious approach is to just copy-paste the HTML across, but this has some issues. The main one being that if I make changes to the nav bar's design, I then have to go through and update <strong>every</strong> single page on the site with the new code! What if I missed one? Users would notice the inconsistent styling and it would feel jarring and odd.</p>
<p>After some research, I found a better solution: <em>server side includes</em>.</p>
<h2 id="server-side-includes-ssi"><a href="#server-side-includes-ssi" class="heading-anchor">Server Side Includes (SSI)</a></h2>
<p><a href="https://en.wikipedia.org/wiki/Server_Side_Includes">According to Wikipedia</a>:</p>
<blockquote>
<p>Server Side Includes (SSI) is a simple interpreted server-side scripting
language used almost exclusively for the World Wide Web.</p>
</blockquote>
<p>For my use case, this means that I can have the server dynamically <em>build</em> a HTML file before sending it of to be displayed in the user's browser.</p>
<p>Here's an example:</p>
<pre data-lang="html" class="language-html z-code"><code class="language-html" data-lang="html"><span class="z-text z-html z-basic"><span class="z-comment z-block z-html"><span class="z-punctuation z-definition z-comment z-begin z-html">&lt;!--</span> nav-bar.shtml <span class="z-punctuation z-definition z-comment z-end z-html">--&gt;</span></span>
</span><span class="z-text z-html z-basic">
</span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&lt;</span><span class="z-entity z-name z-tag z-block z-any z-html">nav</span> <span class="z-meta z-attribute-with-value z-id z-html"><span class="z-entity z-other z-attribute-name z-id z-html">id</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">&quot;</span></span><span class="z-string z-quoted z-double z-html"><span class="z-meta z-toc-list z-id z-html">nav-bar</span><span class="z-punctuation z-definition z-string z-end z-html">&quot;</span></span></span><span class="z-punctuation z-definition z-tag z-end z-html">&gt;</span></span>
</span><span class="z-text z-html z-basic">  <span class="z-comment z-block z-html"><span class="z-punctuation z-definition z-comment z-begin z-html">&lt;!--</span> Navigation bar code goes here <span class="z-punctuation z-definition z-comment z-end z-html">--&gt;</span></span>
</span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&lt;/</span><span class="z-entity z-name z-tag z-block z-any z-html">nav</span><span class="z-punctuation z-definition z-tag z-end z-html">&gt;</span></span>
</span></code></pre>
<pre data-lang="html" class="language-html z-code"><code class="language-html" data-lang="html"><span class="z-text z-html z-basic"><span class="z-comment z-block z-html"><span class="z-punctuation z-definition z-comment z-begin z-html">&lt;!--</span> index.shtml <span class="z-punctuation z-definition z-comment z-end z-html">--&gt;</span></span>
</span><span class="z-text z-html z-basic">
</span><span class="z-text z-html z-basic">&lt;!doctype html&gt;
</span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-structure z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&lt;</span><span class="z-entity z-name z-tag z-structure z-any z-html">html</span> <span class="z-meta z-attribute-with-value z-html"><span class="z-entity z-other z-attribute-name z-html">lang</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">&quot;</span>en<span class="z-punctuation z-definition z-string z-end z-html">&quot;</span></span></span><span class="z-punctuation z-definition z-tag z-end z-html">&gt;</span></span>
</span><span class="z-text z-html z-basic">  <span class="z-meta z-tag z-structure z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&lt;</span><span class="z-entity z-name z-tag z-structure z-any z-html">head</span><span class="z-punctuation z-definition z-tag z-end z-html">&gt;</span></span>
</span><span class="z-text z-html z-basic">    <span class="z-comment z-block z-html"><span class="z-punctuation z-definition z-comment z-begin z-html">&lt;!--</span> Header goes here <span class="z-punctuation z-definition z-comment z-end z-html">--&gt;</span></span>
</span><span class="z-text z-html z-basic">  <span class="z-meta z-tag z-structure z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&lt;/</span><span class="z-entity z-name z-tag z-structure z-any z-html">head</span><span class="z-punctuation z-definition z-tag z-end z-html">&gt;</span></span>
</span><span class="z-text z-html z-basic">
</span><span class="z-text z-html z-basic">  <span class="z-meta z-tag z-structure z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&lt;</span><span class="z-entity z-name z-tag z-structure z-any z-html">body</span><span class="z-punctuation z-definition z-tag z-end z-html">&gt;</span></span>
</span><span class="z-text z-html z-basic">    <span class="z-comment z-block z-html"><span class="z-punctuation z-definition z-comment z-begin z-html">&lt;!--</span> Here is the server side include. As you can see,
</span></span><span class="z-text z-html z-basic"><span class="z-comment z-block z-html">         it looks very similar to a regular HTML comment <span class="z-punctuation z-definition z-comment z-end z-html">--&gt;</span></span>
</span><span class="z-text z-html z-basic">
</span><span class="z-text z-html z-basic">    <span class="z-comment z-block z-html"><span class="z-punctuation z-definition z-comment z-begin z-html">&lt;!--</span>#include file=&quot;nav-bar.shtml&quot; <span class="z-punctuation z-definition z-comment z-end z-html">--&gt;</span></span>
</span><span class="z-text z-html z-basic">
</span><span class="z-text z-html z-basic">    <span class="z-meta z-tag z-other z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&lt;</span></span><span class="z-meta z-tag z-other z-html"><span class="z-entity z-name z-tag z-other z-html">main</span><span class="z-punctuation z-definition z-tag z-end z-html">&gt;</span></span>
</span><span class="z-text z-html z-basic">      <span class="z-comment z-block z-html"><span class="z-punctuation z-definition z-comment z-begin z-html">&lt;!--</span> Page&#39;s main content goes here <span class="z-punctuation z-definition z-comment z-end z-html">--&gt;</span></span>
</span><span class="z-text z-html z-basic">    <span class="z-meta z-tag z-other z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&lt;/</span></span><span class="z-meta z-tag z-other z-html"><span class="z-entity z-name z-tag z-other z-html">main</span><span class="z-punctuation z-definition z-tag z-end z-html">&gt;</span></span>
</span><span class="z-text z-html z-basic">  <span class="z-meta z-tag z-structure z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&lt;/</span><span class="z-entity z-name z-tag z-structure z-any z-html">body</span><span class="z-punctuation z-definition z-tag z-end z-html">&gt;</span></span>
</span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-structure z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&lt;/</span><span class="z-entity z-name z-tag z-structure z-any z-html">html</span><span class="z-punctuation z-definition z-tag z-end z-html">&gt;</span></span>
</span></code></pre>
<p>This will cause the server (in my case <a href="https://nginx.org/en/">Nginx</a>)<sup class="footnote-reference" id="fr-1-1"><a href="#fn-1">1</a></sup> to copy the continence of <code>nav-bar.shtml</code> <em>into</em> <code>index.html</code> <em>before</em> it is sent of to the end users computer to be rendered in their browser.</p>
<p>The benefit of this is that now, whenever I want to make changes to the navigation bar, my updates will be instantly reflected across the whole site with zero effort from me!</p>
<blockquote class="markdown-alert-note">
<p>You may also have noticed the file extension <code>.shtml</code> instead of <code>.html</code>. This
tells the server to look for server side includes within the file.</p>
</blockquote>
<p>After creating the nav bar, I also experimented with making a theme switching button that would toggle between light and dark modes when you pressed it. This feature also benefited from SSI for the same reasons as the nav bar.</p>
<pre data-lang="html" class="language-html z-code"><code class="language-html" data-lang="html"><span class="z-text z-html z-basic"><span class="z-comment z-block z-html"><span class="z-punctuation z-definition z-comment z-begin z-html">&lt;!--</span> index.shtml <span class="z-punctuation z-definition z-comment z-end z-html">--&gt;</span></span>
</span><span class="z-text z-html z-basic"><span class="z-comment z-block z-html"><span class="z-punctuation z-definition z-comment z-begin z-html">&lt;!--</span> Boilerplate code omitted <span class="z-punctuation z-definition z-comment z-end z-html">--&gt;</span></span>
</span><span class="z-text z-html z-basic">
</span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-structure z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&lt;</span><span class="z-entity z-name z-tag z-structure z-any z-html">body</span><span class="z-punctuation z-definition z-tag z-end z-html">&gt;</span></span>
</span><span class="z-text z-html z-basic">  <span class="z-comment z-block z-html"><span class="z-punctuation z-definition z-comment z-begin z-html">&lt;!--</span>#include file=&quot;nav-bar.shtml&quot; <span class="z-punctuation z-definition z-comment z-end z-html">--&gt;</span></span>
</span><span class="z-text z-html z-basic">  <span class="z-comment z-block z-html"><span class="z-punctuation z-definition z-comment z-begin z-html">&lt;!--</span>#include file=&quot;theme-button.shtml&quot; <span class="z-punctuation z-definition z-comment z-end z-html">--&gt;</span></span>
</span><span class="z-text z-html z-basic">
</span><span class="z-text z-html z-basic">  <span class="z-meta z-tag z-other z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&lt;</span></span><span class="z-meta z-tag z-other z-html"><span class="z-entity z-name z-tag z-other z-html">main</span><span class="z-punctuation z-definition z-tag z-end z-html">&gt;</span></span>
</span><span class="z-text z-html z-basic">    <span class="z-comment z-block z-html"><span class="z-punctuation z-definition z-comment z-begin z-html">&lt;!--</span> Page&#39;s main content goes here <span class="z-punctuation z-definition z-comment z-end z-html">--&gt;</span></span>
</span><span class="z-text z-html z-basic">  <span class="z-meta z-tag z-other z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&lt;/</span></span><span class="z-meta z-tag z-other z-html"><span class="z-entity z-name z-tag z-other z-html">main</span><span class="z-punctuation z-definition z-tag z-end z-html">&gt;</span></span>
</span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-structure z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&lt;/</span><span class="z-entity z-name z-tag z-structure z-any z-html">body</span><span class="z-punctuation z-definition z-tag z-end z-html">&gt;</span></span>
</span></code></pre>
<p><img src="https://olliehunt.dev/blog/reinventing-the-ssg/theme-button-dark.webp" alt="Theme switching button in dark mode" />
<img src="https://olliehunt.dev/blog/reinventing-the-ssg/theme-button-light.webp" alt="Theme switching button in light mode" /></p>
<h2 id="markdown"><a href="#markdown" class="heading-anchor">Markdown</a></h2>
<p>With the backbone of the website's code and a few key features out the way, I moved on to thinking about how I would write content for my blog. Writing actual English documents in HTML can be tedious. Balancing opening and closing tags, trying to remember the difference between <code>&lt;strong&gt;</code>, <code>&lt;em&gt;</code>, <code>&lt;i&gt;</code>, and <code>&lt;b&gt;</code>, and all the while trying to make coherent sentences that people actually want to read. Not easy.</p>
<p>Enter, <a href="https://en.wikipedia.org/wiki/Markdown">Markdown</a>.</p>
<p>Markdown is the perfect choice here. It enables me write blog posts without having to code at the same time. It also has a plethora of excellent parsers readily available to convert my documents to HTML.</p>
<p>I would want to automate the process of course, so I got to work writing a Python script. The script would read all markdown files from a given directory and then use <a href="https://pandoc.org/">Pandoc</a> to do the actual conversion. This left me with some nice HTML code ready to be rendered by a browser.</p>
<pre data-lang="python" class="language-python z-code"><code class="language-python" data-lang="python"><span class="z-source z-python"><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> This function takes a path to a markdown file and returns a
</span></span><span class="z-source z-python"><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> string of HTML code.
</span></span><span class="z-source z-python"><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span>
</span></span><span class="z-source z-python"><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Requires the pandoc binary to be installed in order to work.
</span></span><span class="z-source z-python"><span class="z-meta z-function z-python"><span class="z-storage z-type z-function z-python"><span class="z-keyword z-declaration z-function z-python">def</span></span> <span class="z-entity z-name z-function z-python"><span class="z-meta z-generic-name z-python">mdToHtml</span></span></span><span class="z-meta z-function z-parameters z-python"><span class="z-punctuation z-section z-parameters z-begin z-python">(</span></span><span class="z-meta z-function z-parameters z-python"><span class="z-variable z-parameter z-python">mdPath</span></span><span class="z-meta z-function z-parameters z-annotation z-python"><span class="z-punctuation z-separator z-annotation z-parameter z-python">:</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">Path</span></span></span><span class="z-meta z-function z-parameters z-python"><span class="z-punctuation z-section z-parameters z-end z-python">)</span></span><span class="z-meta z-function z-python"> </span><span class="z-meta z-function z-annotation z-return z-python"><span class="z-punctuation z-separator z-annotation z-return z-python">-&gt;</span> <span class="z-meta z-qualified-name z-python"><span class="z-support z-type z-python">str</span></span></span><span class="z-meta z-function z-python"><span class="z-punctuation z-section z-function z-begin z-python">:</span></span>
</span><span class="z-source z-python">    <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Use the external pandoc command to perform the conversion
</span></span><span class="z-source z-python">    <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">result</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">subprocess</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">run</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span>
</span></span><span class="z-source z-python"><span class="z-meta z-function-call z-arguments z-python">        <span class="z-meta z-sequence z-list z-python"><span class="z-punctuation z-section z-sequence z-begin z-python">[</span><span class="z-meta z-string z-python"><span class="z-string z-quoted z-double z-python"><span class="z-punctuation z-definition z-string z-begin z-python">&quot;</span></span></span><span class="z-meta z-string z-python"><span class="z-string z-quoted z-double z-python">pandoc<span class="z-punctuation z-definition z-string z-end z-python">&quot;</span></span></span><span class="z-punctuation z-separator z-sequence z-python">,</span> <span class="z-meta z-string z-python"><span class="z-string z-quoted z-double z-python"><span class="z-punctuation z-definition z-string z-begin z-python">&quot;</span></span></span><span class="z-meta z-string z-python"><span class="z-string z-quoted z-double z-python">-f<span class="z-punctuation z-definition z-string z-end z-python">&quot;</span></span></span><span class="z-punctuation z-separator z-sequence z-python">,</span> <span class="z-meta z-string z-python"><span class="z-string z-quoted z-double z-python"><span class="z-punctuation z-definition z-string z-begin z-python">&quot;</span></span></span><span class="z-meta z-string z-python"><span class="z-string z-quoted z-double z-python">gfm<span class="z-punctuation z-definition z-string z-end z-python">&quot;</span></span></span><span class="z-punctuation z-separator z-sequence z-python">,</span> <span class="z-meta z-string z-python"><span class="z-string z-quoted z-double z-python"><span class="z-punctuation z-definition z-string z-begin z-python">&quot;</span></span></span><span class="z-meta z-string z-python"><span class="z-string z-quoted z-double z-python">-t<span class="z-punctuation z-definition z-string z-end z-python">&quot;</span></span></span><span class="z-punctuation z-separator z-sequence z-python">,</span> <span class="z-meta z-string z-python"><span class="z-string z-quoted z-double z-python"><span class="z-punctuation z-definition z-string z-begin z-python">&quot;</span></span></span><span class="z-meta z-string z-python"><span class="z-string z-quoted z-double z-python">html5<span class="z-punctuation z-definition z-string z-end z-python">&quot;</span></span></span><span class="z-punctuation z-separator z-sequence z-python">,</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">mdPath</span></span><span class="z-punctuation z-section z-sequence z-end z-python">]</span></span><span class="z-punctuation z-separator z-arguments z-python">,</span>
</span></span><span class="z-source z-python"><span class="z-meta z-function-call z-arguments z-python">        <span class="z-variable z-parameter z-python">capture_output</span><span class="z-keyword z-operator z-assignment z-python">=</span><span class="z-constant z-language z-python">True</span><span class="z-punctuation z-separator z-arguments z-python">,</span> <span class="z-variable z-parameter z-python">text</span><span class="z-keyword z-operator z-assignment z-python">=</span><span class="z-constant z-language z-python">True</span>
</span></span><span class="z-source z-python"><span class="z-meta z-function-call z-arguments z-python">    <span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</span><span class="z-source z-python">
</span><span class="z-source z-python">    <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Exit if command failed
</span></span><span class="z-source z-python">    <span class="z-meta z-statement z-conditional z-if z-python"><span class="z-keyword z-control z-conditional z-if z-python">if</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">result</span><span class="z-punctuation z-accessor z-dot z-python">.</span><span class="z-meta z-generic-name z-python">returncode</span></span> <span class="z-keyword z-operator z-comparison z-python">!=</span> <span class="z-constant z-numeric z-integer z-decimal z-python">0</span><span class="z-punctuation z-section z-block z-conditional z-if z-python">:</span></span>
</span><span class="z-source z-python">        <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sys</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">exit</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-string z-python"><span class="z-string z-quoted z-double z-python"><span class="z-punctuation z-definition z-string z-begin z-python">&quot;</span></span></span><span class="z-meta z-string z-python"><span class="z-string z-quoted z-double z-python">ERROR: Markdown to HTML conversion command exited with non-zero exit code.<span class="z-constant z-character z-escape z-python">\n</span><span class="z-constant z-character z-escape z-python">\n</span>STDOUT:<span class="z-constant z-character z-escape z-python">\n</span><span class="z-constant z-other z-placeholder z-python">%s</span><span class="z-constant z-character z-escape z-python">\n</span><span class="z-constant z-character z-escape z-python">\n</span>STDERR:<span class="z-constant z-character z-escape z-python">\n</span><span class="z-constant z-other z-placeholder z-python">%s</span><span class="z-punctuation z-definition z-string z-end z-python">&quot;</span></span></span> <span class="z-keyword z-operator z-arithmetic z-python">%</span> <span class="z-meta z-sequence z-tuple z-python"><span class="z-punctuation z-section z-sequence z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">result</span><span class="z-punctuation z-accessor z-dot z-python">.</span><span class="z-meta z-generic-name z-python">stdout</span></span><span class="z-punctuation z-separator z-sequence z-python">,</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">result</span><span class="z-punctuation z-accessor z-dot z-python">.</span><span class="z-meta z-generic-name z-python">stderr</span></span><span class="z-punctuation z-section z-sequence z-end z-python">)</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</span><span class="z-source z-python">
</span><span class="z-source z-python">    <span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Return generated HTML with comment giving credit to pandoc
</span></span><span class="z-source z-python">    <span class="z-keyword z-control z-flow z-return z-python">return</span> <span class="z-meta z-group z-python"><span class="z-punctuation z-section z-group z-begin z-python">(</span>
</span></span><span class="z-source z-python"><span class="z-meta z-group z-python">        <span class="z-meta z-string z-python"><span class="z-string z-quoted z-double z-python"><span class="z-punctuation z-definition z-string z-begin z-python">&quot;</span></span></span><span class="z-meta z-string z-python"><span class="z-string z-quoted z-double z-python">&lt;!-- HTML generated by [pandoc](https://pandoc.org) from a markdown file --&gt;<span class="z-constant z-character z-escape z-python">\n</span><span class="z-constant z-character z-escape z-python">\n</span><span class="z-punctuation z-definition z-string z-end z-python">&quot;</span></span></span> <span class="z-keyword z-operator z-arithmetic z-python">+</span>
</span></span><span class="z-source z-python"><span class="z-meta z-group z-python">        <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">result</span><span class="z-punctuation z-accessor z-dot z-python">.</span><span class="z-meta z-generic-name z-python">stdout</span></span>
</span></span><span class="z-source z-python"><span class="z-meta z-group z-python">    <span class="z-punctuation z-section z-group z-end z-python">)</span></span>
</span></code></pre>
<p>Next, I needed a way to put the generated HTML into a template that includes the nav bar, the theme button, and all the boilerplate HTML. Here is the template I made:</p>
<pre data-lang="html" class="language-html z-code"><code class="language-html" data-lang="html"><span class="z-text z-html z-basic">&lt;!doctype html&gt;
</span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-structure z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&lt;</span><span class="z-entity z-name z-tag z-structure z-any z-html">html</span> <span class="z-meta z-attribute-with-value z-html"><span class="z-entity z-other z-attribute-name z-html">lang</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">&quot;</span>en<span class="z-punctuation z-definition z-string z-end z-html">&quot;</span></span></span><span class="z-punctuation z-definition z-tag z-end z-html">&gt;</span></span>
</span><span class="z-text z-html z-basic">  <span class="z-meta z-tag z-structure z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&lt;</span><span class="z-entity z-name z-tag z-structure z-any z-html">head</span><span class="z-punctuation z-definition z-tag z-end z-html">&gt;</span></span>
</span><span class="z-text z-html z-basic">    <span class="z-comment z-block z-html"><span class="z-punctuation z-definition z-comment z-begin z-html">&lt;!--</span> Meta tags, style sheets, etc... <span class="z-punctuation z-definition z-comment z-end z-html">--&gt;</span></span>
</span><span class="z-text z-html z-basic">  <span class="z-meta z-tag z-structure z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&lt;/</span><span class="z-entity z-name z-tag z-structure z-any z-html">head</span><span class="z-punctuation z-definition z-tag z-end z-html">&gt;</span></span>
</span><span class="z-text z-html z-basic">
</span><span class="z-text z-html z-basic">  <span class="z-meta z-tag z-structure z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&lt;</span><span class="z-entity z-name z-tag z-structure z-any z-html">body</span><span class="z-punctuation z-definition z-tag z-end z-html">&gt;</span></span>
</span><span class="z-text z-html z-basic">    <span class="z-comment z-block z-html"><span class="z-punctuation z-definition z-comment z-begin z-html">&lt;!--</span>#include file=&quot;/html-components/nav-bar.shtml&quot; <span class="z-punctuation z-definition z-comment z-end z-html">--&gt;</span></span>
</span><span class="z-text z-html z-basic">    <span class="z-comment z-block z-html"><span class="z-punctuation z-definition z-comment z-begin z-html">&lt;!--</span>#include file=&quot;/html-components/theme-button.shtml&quot; <span class="z-punctuation z-definition z-comment z-end z-html">--&gt;</span></span>
</span><span class="z-text z-html z-basic">
</span><span class="z-text z-html z-basic">    <span class="z-meta z-tag z-other z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&lt;</span></span><span class="z-meta z-tag z-other z-html"><span class="z-entity z-name z-tag z-other z-html">main</span><span class="z-punctuation z-definition z-tag z-end z-html">&gt;</span></span>
</span><span class="z-text z-html z-basic">      <span class="z-comment z-block z-html"><span class="z-punctuation z-definition z-comment z-begin z-html">&lt;!--</span> ARTICLE CONTENT <span class="z-punctuation z-definition z-comment z-end z-html">--&gt;</span></span>
</span><span class="z-text z-html z-basic">    <span class="z-meta z-tag z-other z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&lt;/</span></span><span class="z-meta z-tag z-other z-html"><span class="z-entity z-name z-tag z-other z-html">main</span><span class="z-punctuation z-definition z-tag z-end z-html">&gt;</span></span>
</span><span class="z-text z-html z-basic">  <span class="z-meta z-tag z-structure z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&lt;/</span><span class="z-entity z-name z-tag z-structure z-any z-html">body</span><span class="z-punctuation z-definition z-tag z-end z-html">&gt;</span></span>
</span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-structure z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&lt;/</span><span class="z-entity z-name z-tag z-structure z-any z-html">html</span><span class="z-punctuation z-definition z-tag z-end z-html">&gt;</span></span>
</span></code></pre>
<p>Now, in Python I could just use the built in string replace function (<a href="https://docs.python.org/3/library/stdtypes.html#str.replace"><code>str.replace</code></a>) to search for the <code>&lt;!-- ARTICLE CONTENT --&gt;</code> string and replace it with the HTML output by Pandoc.</p>
<p>In case you are curious, the full Python script can be found <a href="https://github.com/OllieSHunt/ollies-website/blob/ccc93d9cb187cbb11fb65173553a5e9c274b77c9/dev-scripts/build-blog.py">here</a>.</p>
<h2 id="reinventing-the-wheel"><a href="#reinventing-the-wheel" class="heading-anchor">Reinventing The Wheel</a></h2>
<p>So this works. And it works well. Whenever I write a blog article in markdown, I can just re-run the Python script and have it be automatically converted into HTML and inserted into my template. Then Nginx will use server side includes to automatically insert the nav bar and any other needed elements.</p>
<p>But, during my research for alternative markdown parsers to Pandoc, I found a new type of software that I was not previously aware existed: <a href="https://en.wikipedia.org/wiki/Static_site_generator">static site generators</a>.</p>
<p>Here are some excerpts from Wikipedia that explain SSGs very concisely:</p>
<blockquote>
<p>Static site generators (SSGs) are software engines that use text input files
(such as Markdown, reStructuredText, AsciiDoc and JSON) to generate static web
pages.</p>
</blockquote>
<blockquote>
<p>SSGs typically consist of a template written in HTML with a templating system,
such as Liquid (Jekyll) or Go template (Hugo). The same structure (typically a
Git repository) includes content in a plain-text format such as Markdown or
reStructuredText, or in a structural meta format such as JSON or XML. A single
plain-text file may correspond to a single web page.</p>
</blockquote>
<p>Hang on a second, this almost perfectly describes what I have just spent dozens of hours creating! My templating system is just a combination of SSI and Python's <code>str.replace</code> method, and my content is written in Markdown!</p>
<p>I have unintentionally made a very basic, slightly inflexible, static site generator.</p>
<h2 id="zola"><a href="#zola" class="heading-anchor">Zola</a></h2>
<p>So, i've made an SSG. Oops. As we're here, I may as well make my life easier by doubling down and pivot towards a proper, purpose built static site generator that's better built, has more features, and is generally a lot more robust.</p>
<p>There are <a href="https://github.com/topics/static-site-generator">lots</a> of excellent sounding options here, but after some thought I picked out <a href="https://www.getzola.org/">Zola</a> as my favourite. Honestly, the main reason for this was that it is written in Rust. I know this is not the most sensible reason to choose based off of, but there were so many options, I decided to just pick one and Zola is the one I picked.</p>
<p>After spending some time converting my code<sup class="footnote-reference" id="fr-2-1"><a href="#fn-2">2</a></sup> over in a separate git branch, I have decided that Zola was definitely the correct choice. Remember that blog post template from earlier? Here is a revised version using Zola:</p>
<pre data-lang="html" class="language-html z-code"><code class="language-html" data-lang="html"><span class="z-text z-html z-basic">{% extends &quot;base.html&quot; %}
</span><span class="z-text z-html z-basic">
</span><span class="z-text z-html z-basic">{% block content %}
</span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&lt;</span><span class="z-entity z-name z-tag z-block z-any z-html">article</span><span class="z-punctuation z-definition z-tag z-end z-html">&gt;</span></span>
</span><span class="z-text z-html z-basic">    {{ page.content | safe }}
</span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&lt;/</span><span class="z-entity z-name z-tag z-block z-any z-html">article</span><span class="z-punctuation z-definition z-tag z-end z-html">&gt;</span></span>
</span><span class="z-text z-html z-basic">{% endblock content %}
</span></code></pre>
<p>Much shorter.</p>
<p>And here's a new page that creates a very simple list of all blog posts.</p>
<pre data-lang="html" class="language-html z-code"><code class="language-html" data-lang="html"><span class="z-text z-html z-basic">{% extends &quot;base.html&quot; %}
</span><span class="z-text z-html z-basic">
</span><span class="z-text z-html z-basic">{% block content %}
</span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&lt;</span><span class="z-entity z-name z-tag z-block z-any z-html">h1</span><span class="z-punctuation z-definition z-tag z-end z-html">&gt;</span></span>{{ section.title }}<span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&lt;/</span><span class="z-entity z-name z-tag z-block z-any z-html">h1</span><span class="z-punctuation z-definition z-tag z-end z-html">&gt;</span></span>
</span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&lt;</span><span class="z-entity z-name z-tag z-block z-any z-html">ul</span><span class="z-punctuation z-definition z-tag z-end z-html">&gt;</span></span>
</span><span class="z-text z-html z-basic">    {% for page in section.pages %}
</span><span class="z-text z-html z-basic">    <span class="z-meta z-tag z-inline z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&lt;</span><span class="z-entity z-name z-tag z-inline z-any z-html">li</span><span class="z-punctuation z-definition z-tag z-end z-html">&gt;</span></span><span class="z-meta z-tag z-inline z-a z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&lt;</span><span class="z-entity z-name z-tag z-inline z-a z-html">a</span> <span class="z-meta z-attribute-with-value z-html"><span class="z-entity z-other z-attribute-name z-html">href</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">&quot;</span>{{ page.permalink | safe }}<span class="z-punctuation z-definition z-string z-end z-html">&quot;</span></span></span><span class="z-punctuation z-definition z-tag z-end z-html">&gt;</span></span>{{ page.title }}<span class="z-meta z-tag z-inline z-a z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&lt;/</span><span class="z-entity z-name z-tag z-inline z-a z-html">a</span><span class="z-punctuation z-definition z-tag z-end z-html">&gt;</span></span><span class="z-meta z-tag z-inline z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&lt;/</span><span class="z-entity z-name z-tag z-inline z-any z-html">li</span><span class="z-punctuation z-definition z-tag z-end z-html">&gt;</span></span>
</span><span class="z-text z-html z-basic">    {% endfor %}
</span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&lt;/</span><span class="z-entity z-name z-tag z-block z-any z-html">ul</span><span class="z-punctuation z-definition z-tag z-end z-html">&gt;</span></span>
</span><span class="z-text z-html z-basic">{% endblock content %}
</span></code></pre>
<p>Do you see that? A <code>for</code> loop! That is way out of the scope of my little Python script. In fact, in between those curly brackets, Zola essentially allows for a whole other programming language with support for variables, if statements, and of course, loops! This allows for much more power and flexibility going forward with my site and I am definitely glad I decided to switch.</p>
<p>Moral of the story? You probably don't need to reinvent the wheel, but it's still fun to try!</p>
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn-1">
<p>If your using <a href="https://nginx.org/en/">Nginx</a> like I was, then SSI will be disabled by default, you can use <a href="https://github.com/OllieSHunt/ollies-website/blob/ccc93d9cb187cbb11fb65173553a5e9c274b77c9/dev-scripts/nginx-dev.conf">this configuration file</a> as an example of how to enable it. <a href="#fr-1-1">↩</a></p>
</li>
<li id="fn-2">
<p>In case you want to see it, <a href="https://github.com/OllieSHunt/ollies-website/tree/ccc93d9cb187cbb11fb65173553a5e9c274b77c9">here is a link to the last commit</a> of my site that did not use Zola. <a href="#fr-2-1">↩</a></p>
</li>
</ol>
</section>

    <footer>
        <ul>
            <li class="footer-comment"><em>If you have any questions, feedback, or corrections please feel free to contact me at: <a href="mailto:olliehuntcontact@gmail.com">olliehuntcontact@gmail.com</a>.</em></li>
            <li><strong>Published: </strong><em>2025-08-09</em></li>
            <li class="article-updates">
                <strong id="article-updates-heading">Updates:</strong>
                <ol aria-labelledby="article-updates-heading">
                    
                    <li>No updates</li>
                    
                </ol>
            </li>
        </ul>
    </footer>
</article>
</main>
    </body>
    <noscript>
        <!-- Stop the header bar from following you down the page if JavaScript is disabled because it breaks the effect and looks odd in my opinion -->
        <style>
            #header-bar {
                position: relative;
            }
        </style>
    </noscript>
</html>
